using System.Collections.Generic;
using System.Xml;
using Bannerlord.UIExtenderEx.Attributes;
using Bannerlord.UIExtenderEx.Prefabs2;

namespace BannerKings.UI.Extensions
{
    [PrefabExtension("DiplomacyPanel", "descendant::Widget[1]/Children/ListPanel[1]/Children/Widget[1]/Children/ListPanel[1]/Children", "DiplomacyPanel")]
    internal class KingdomDiplomacyExtension : PrefabExtensionInsertPatch
    {
        private readonly List<XmlNode> nodes;

        public KingdomDiplomacyExtension()
        {
            var war1 = new XmlDocument();
            var war2 = new XmlDocument();

            var peace1 = new XmlDocument();
            //firstChild.LoadXml(
            //    \"<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"75\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\" ><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@JustificationHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@JustificationText\" /></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"24\" Text=\"@WarScoreHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"36\" Text=\"@WarScoreText\" /></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@WarFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@WarFatigueText\" /></Children></ListPanel></Children></ListPanel>\");
            war1.LoadXml("<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"50\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\"><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@JustificationHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@JustificationText\"><Children><HintWidget DataSource=\"{JustificationHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"24\" Text=\"@WarScoreHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"36\" Text=\"@WarScoreText\"><Children><HintWidget DataSource=\"{WarScoreHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@WarObjectiveHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@WarObjectiveText\"><Children><HintWidget DataSource=\"{WarObjectiveHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel></Children></ListPanel>");
            war2.LoadXml("<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"50\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\"><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@PlayerFrontHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@PlayerFrontText\"><Children><HintWidget DataSource=\"{FrontHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@PlayerFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@PlayerFatigueText\"><Children><HintWidget DataSource=\"{PlayerFatigueHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@EnemyFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@EnemyFatigueText\"><Children><HintWidget DataSource=\"{EnemyFatigueHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@EnemyFrontHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@EnemyFrontText\"><Children><HintWidget DataSource=\"{FrontHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel></Children></ListPanel>");

            peace1.LoadXml("<ListPanel IsVisible=\"@PeaceExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"50\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\"><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@WarSupportHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@WarSupportText\"><Children><HintWidget DataSource=\"{WarSupportHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@TradePactHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@TradePactText\"><Children><HintWidget DataSource=\"{TradePactHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@AllianceHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@AllianceText\"><Children><HintWidget DataSource=\"{AllianceHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@TruceHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@TruceText\"><Children><HintWidget DataSource=\"{TruceHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel></Children></ListPanel>");

            nodes = new List<XmlNode> { war1, war2, peace1};
        }

        public override InsertType Type => InsertType.Child;
        public override int Index => 2;

        [PrefabExtensionXmlNodes] public IEnumerable<XmlNode> Nodes => nodes;
    }
}